#call "source("c:/Users/ProBoSA/Dropbox/_uni/_projekte/_probosa/_model/color-composit.R")"
#######################################################################################################
#######################################################################################################
#######################################################################################################
#Color composit
#######################################################################################################
#######################################################################################################
#######################################################################################################
#packages
#######################################################################################################
loadandinstall <- function(mypkg) {if (!is.element(mypkg,
                                                   installed.packages()[,1])){install.packages(mypkg)};
  library(mypkg, character.only=TRUE)  }

pk <- c("raster","rgdal","tcltk","manipulate")
for(i in pk){loadandinstall(i)}
#######################################################################################################
#Definition of possible data  types
#######################################################################################################

Filters <- matrix(c("tif", "*.tif", "asc", "*.asc", "flt", "*.flt",
                    "SAGA", "*.sdat", "All files", "*"),
                  5, 2, byrow = TRUE)
rownames(Filters) <- c("tif", "asc","flt","SAGA","All files")
print(noquote(rownames(Filters)))
ft <- readline(prompt = "Enter a file format: ")
#######################################################################################################
#Interactive choosing of working directory
#######################################################################################################
setwd(file.path(choose.dir(default = "", caption = "Choose working directory")))
#######################################################################################################
#Interactiv  raster import
#######################################################################################################
b1 <- choose.files(filters = Filters[c(ft),],caption = "Select band 1 (red)")
b2 <- choose.files(filters = Filters[c(ft),],caption = "Select band 2 (green)")
b3 <- choose.files(filters = Filters[c(ft),],caption = "Select band 3 (blue)")
#######################################################################################################
#Raster stack
#######################################################################################################
rgbRaster <- stack(c(b1,b2,b3))
#######################################################################################################
#Interactive raster export
#######################################################################################################
output.name <- tkgetSaveFile(initialfile="", title="Save a file ...")
writeRaster(rgbRaster,paste(output.name,sep=""),"GTiff", overwrite=TRUE)